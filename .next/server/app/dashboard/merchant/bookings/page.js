(()=>{var e={};e.id=905,e.ids=[905],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},2298:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(60432),s(31216),s(35866);var a=s(23191),t=s(88716),i=s(37922),n=s.n(i),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let c=["",{children:["dashboard",{children:["merchant",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,60432)),"/home/dimagio/Applications/bemyrider project/bemyrider_app/bemyrider/app/dashboard/merchant/bookings/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,49547)),"/home/dimagio/Applications/bemyrider project/bemyrider_app/bemyrider/app/dashboard/merchant/bookings/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,95684)),"/home/dimagio/Applications/bemyrider project/bemyrider_app/bemyrider/app/dashboard/merchant/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,13321)),"/home/dimagio/Applications/bemyrider project/bemyrider_app/bemyrider/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,31216)),"/home/dimagio/Applications/bemyrider project/bemyrider_app/bemyrider/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/dimagio/Applications/bemyrider project/bemyrider_app/bemyrider/app/dashboard/merchant/bookings/page.tsx"],m="/dashboard/merchant/bookings/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/merchant/bookings/page",pathname:"/dashboard/merchant/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},18957:(e,r,s)=>{Promise.resolve().then(s.bind(s,1586))},1586:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>y});var a=s(10326),t=s(17577),i=s(35047),n=s(90772),o=s(33071),l=s(567),c=s(86333),d=s(37358),m=s(79635),p=s(48998),h=s(26409),x=s(77636),u=s(35442),b=s(34789),g=s(16932);function y(){let e=(0,i.useRouter)(),{toast:r}=(0,b.pm)(),[s,y]=(0,t.useState)([]),[j,v]=(0,t.useState)(!0),[f,N]=(0,t.useState)(null),k=async()=>{try{v(!0);let{data:{user:r},error:s}=await u.O.auth.getUser();if(s||!r){e.push("/auth/login");return}let a=await fetch("/api/bookings",{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("Errore nel caricamento delle prenotazioni");let t=await a.json();y(t.bookings||[])}catch(e){console.error("Error fetching bookings:",e),N(e.message||"Errore nel caricamento delle prenotazioni")}finally{v(!1)}},_=e=>{let r={in_attesa:{label:"In Attesa",variant:"secondary"},confermata:{label:"Confermata",variant:"default"},in_corso:{label:"In Corso",variant:"secondary"},completata:{label:"Completata",variant:"default"},annullata:{label:"Annullata",variant:"destructive"}}[e]||{label:e,variant:"secondary"};return a.jsx(l.C,{variant:r.variant,children:r.label})},z=e=>new Date(e).toLocaleDateString("it-IT",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return j?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Caricamento prenotazioni..."})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(n.z,{variant:"ghost",onClick:()=>e.back(),className:"mb-4",children:[a.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Torna alla Dashboard"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestisci Prenotazioni"}),a.jsx("p",{className:"text-gray-600",children:"Visualizza e gestisci le tue prenotazioni rider"})]}),f&&a.jsx(o.Zb,{className:"mb-6 border-red-200 bg-red-50",children:(0,a.jsxs)(o.aY,{className:"p-4",children:[a.jsx("p",{className:"text-red-600",children:f}),a.jsx(n.z,{onClick:k,className:"mt-2",children:"Riprova"})]})}),0===s.length?a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"text-center py-12",children:[a.jsx(d.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessuna prenotazione"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Non hai ancora effettuato prenotazioni. Cerca un rider per iniziare."}),a.jsx(n.z,{onClick:()=>e.push("/dashboard/merchant"),children:"Torna alla Dashboard"})]})}):a.jsx("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)(o.Zb,{className:"hover:shadow-lg transition-shadow",children:[a.jsx(o.Ol,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-2",children:[a.jsx(m.Z,{className:"h-5 w-5"}),e.riderName]}),(0,a.jsxs)(o.SZ,{children:["Prenotazione #",e.id.slice(-8)]})]}),_(e.status)]})}),a.jsx(o.aY,{children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm",children:[a.jsx("strong",{children:"Inizio:"})," ",z(e.startTime)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm",children:[a.jsx("strong",{children:"Durata:"})," ",e.duration,"h"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm",children:[a.jsx("strong",{children:"Totale:"})," ",(0,g.xG)(e.grossAmount)]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[e.description&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(x.Z,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Descrizione:"})]}),a.jsx("p",{className:"text-sm text-gray-600 ml-6",children:e.description})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4",children:["in_attesa"===e.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.z,{size:"sm",variant:"outline",children:"Modifica"}),a.jsx(n.z,{size:"sm",variant:"destructive",children:"Annulla"})]}),"confermata"===e.status&&a.jsx(n.z,{size:"sm",children:"Contatta Rider"})]})]})]})})]},e.id))})]})})}},48998:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(76557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},26409:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(76557).Z)("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]])},77636:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(76557).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},13321:(e,r,s)=>{"use strict";function a({children:e}){return e}s.r(r),s.d(r,{default:()=>a})},49547:(e,r,s)=>{"use strict";function a({children:e}){return e}s.r(r),s.d(r,{default:()=>a})},60432:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`/home/dimagio/Applications/bemyrider project/bemyrider_app/bemyrider/app/dashboard/merchant/bookings/page.tsx#default`)},95684:(e,r,s)=>{"use strict";function a({children:e}){return e}s.r(r),s.d(r,{default:()=>a})}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[276,643,158,163],()=>s(2298));module.exports=a})();