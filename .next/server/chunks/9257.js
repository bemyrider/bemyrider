"use strict";exports.id=9257,exports.ids=[9257],exports.modules={54707:(e,a,t)=>{t.d(a,{Z:()=>R});var i=t(10326),s=t(17577),r=t(46226),l=t(90772),o=t(54432),n=t(87673),c=t(33071),d=t(62288),m=t(567),x=t(76557);let p=(0,x.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var g=t(94019);let f=(0,x.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var u=t(997),h=t(83855),v=t(7027);let y=(0,x.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var j=t(31215),N=t(34789),b=t(35442);function R({initialData:e,onSave:a,onClose:t,isLoading:x=!1}){let{toast:R}=(0,N.pm)(),w=(0,s.useRef)(null),[k,O]=(0,s.useState)(e.portfolioImages||[]),[_,z]=(0,s.useState)(e.certifications||[]),[I,Z]=(0,s.useState)(e.portfolioUrl||""),[E,U]=(0,s.useState)(e.servicesDescription||""),[S,A]=(0,s.useState)(""),[L,M]=(0,s.useState)(!1),D=async e=>{let a=10-k.length;if(e.length>a){R({title:"Limite raggiunto",description:`Puoi aggiungere massimo ${a} immagini`});return}let t=[];for(let i=0;i<Math.min(e.length,a);i++){let a=e[i];if(a.size>5242880){R({title:"File troppo grande",description:`${a.name} \xe8 troppo grande (max 5MB)`});continue}if(!a.type.startsWith("image/")){R({title:"Tipo file non valido",description:`${a.name} non \xe8 un'immagine valida`});continue}try{let{data:{user:e}}=await b.O.auth.getUser();if(!e){R({title:"Errore",description:"Utente non autenticato"});continue}let i=new FormData;i.append("image",a);let s=await fetch(`/api/riders/${e.id}/portfolio`,{method:"POST",body:i});if(!s.ok){let e=await s.json();throw Error(e.error||"Upload fallito")}let r=await s.json();t.push(r.imageUrl)}catch(e){console.error("Errore upload immagine:",e),R({title:"Errore upload",description:e.message||"Errore durante l'upload dell'immagine"});continue}}t.length>0&&(O(e=>[...e,...t]),R({title:"Immagini aggiunte",description:`Aggiunte ${t.length} immagini al portfolio`}))},C=e=>{O(a=>{let t=[...a];return URL.revokeObjectURL(t[e]),t.splice(e,1),t})},H=()=>{let e=S.trim();e&&!_.includes(e)&&(z(a=>[...a,e]),A(""))},P=e=>{z(a=>a.filter(a=>a!==e))},Y=async()=>{try{if(M(!0),I&&!I.match(/^https?:\/\/.+/)){R({title:"Invalid URL",description:"URL must start with http:// or https://"});return}let e={portfolioImages:k,certifications:_,portfolioUrl:I.trim(),servicesDescription:E.trim()};await a(e),R({title:"Portfolio salvato",description:"Le modifiche sono state salvate con successo"}),t()}catch(e){console.error("Errore nel salvataggio del portfolio:",e),R({title:"Error",description:"An error occurred while saving"})}finally{M(!1)}};return i.jsx(d.Vq,{open:!0,onOpenChange:t,children:(0,i.jsxs)(d.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)(d.fK,{children:[i.jsx(d.$N,{className:"text-xl",children:"Modifica Portfolio"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Gestisci le tue immagini, certificazioni e descrizione dei servizi"})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)(c.Zb,{children:[(0,i.jsxs)(c.Ol,{children:[(0,i.jsxs)(c.ll,{className:"text-lg flex items-center",children:[i.jsx(p,{className:"h-5 w-5 mr-2"}),"Immagini Portfolio"]}),(0,i.jsxs)(c.SZ,{children:["Aggiungi fino a 10 immagini per mostrare il tuo lavoro (",k.length,"/10)"]})]}),(0,i.jsxs)(c.aY,{className:"space-y-4",children:[k.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:k.map((e,a)=>i.jsx("div",{className:"relative group",children:(0,i.jsxs)("div",{className:"aspect-square relative rounded-lg overflow-hidden border",children:[i.jsx(r.default,{src:e,alt:`Portfolio ${a+1}`,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 50vw, 33vw"}),i.jsx(l.z,{variant:"destructive",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>C(a),children:i.jsx(g.Z,{className:"h-4 w-4"})})]})},a))}),k.length<10&&(0,i.jsxs)(i.Fragment,{children:[i.jsx("input",{ref:w,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>e.target.files&&D(e.target.files)}),(0,i.jsxs)(l.z,{variant:"outline",onClick:()=>w.current?.click(),className:"w-full border-dashed border-2",children:[i.jsx(f,{className:"h-4 w-4 mr-2"}),"Aggiungi Immagini"]})]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Formati supportati: JPG, PNG, WebP. Dimensione massima: 5MB per immagine."})]})]}),(0,i.jsxs)(c.Zb,{children:[(0,i.jsxs)(c.Ol,{children:[(0,i.jsxs)(c.ll,{className:"text-lg flex items-center",children:[i.jsx(u.Z,{className:"h-5 w-5 mr-2"}),"Certificazioni"]}),i.jsx(c.SZ,{children:"Aggiungi le tue certificazioni e qualifiche professionali"})]}),(0,i.jsxs)(c.aY,{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(o.I,{placeholder:"Es: Patente B, Corso Sicurezza, etc.",value:S,onChange:e=>A(e.target.value),onKeyPress:e=>"Enter"===e.key&&H()}),i.jsx(l.z,{onClick:H,disabled:!S.trim(),children:i.jsx(h.Z,{className:"h-4 w-4"})})]}),_.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2",children:_.map((e,a)=>(0,i.jsxs)(m.C,{variant:"secondary",className:"text-sm",children:[e,i.jsx(l.z,{variant:"ghost",size:"sm",className:"ml-2 h-4 w-4 p-0 hover:bg-red-100",onClick:()=>P(e),children:i.jsx(g.Z,{className:"h-3 w-3"})})]},a))})]})]}),(0,i.jsxs)(c.Zb,{children:[(0,i.jsxs)(c.Ol,{children:[(0,i.jsxs)(c.ll,{className:"text-lg flex items-center",children:[i.jsx(v.Z,{className:"h-5 w-5 mr-2"}),"Portfolio Online"]}),i.jsx(c.SZ,{children:"Link al tuo portfolio/website esterno (opzionale)"})]}),i.jsx(c.aY,{children:i.jsx(o.I,{type:"url",placeholder:"https://tuoportfolio.com",value:I,onChange:e=>Z(e.target.value)})})]}),(0,i.jsxs)(c.Zb,{children:[(0,i.jsxs)(c.Ol,{children:[i.jsx(c.ll,{className:"text-lg",children:"Descrizione Servizi"}),i.jsx(c.SZ,{children:"Descrivi i servizi che offri e la tua esperienza"})]}),(0,i.jsxs)(c.aY,{children:[i.jsx(n.g,{placeholder:"Descrivi i tuoi servizi, la tua esperienza e ci\xf2 che ti rende speciale...",value:E,onChange:e=>U(e.target.value),rows:4,maxLength:1e3}),(0,i.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[E.length,"/1000 caratteri"]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[i.jsx(l.z,{variant:"outline",onClick:t,disabled:L,children:"Annulla"}),i.jsx(l.z,{onClick:Y,disabled:L,children:L?(0,i.jsxs)(i.Fragment,{children:[i.jsx(y,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):(0,i.jsxs)(i.Fragment,{children:[i.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Salva Portfolio"]})})]})]})]})})}},567:(e,a,t)=>{t.d(a,{C:()=>o});var i=t(10326);t(17577);var s=t(79360),r=t(77863);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:a,...t}){return i.jsx("div",{className:(0,r.cn)(l({variant:a}),e),...t})}},62288:(e,a,t)=>{t.d(a,{$N:()=>p,Vq:()=>n,cZ:()=>m,fK:()=>x});var i=t(10326),s=t(17577),r=t(1656),l=t(94019),o=t(77863);let n=r.fC;r.xz;let c=r.h_;r.x8;let d=s.forwardRef(({className:e,...a},t)=>i.jsx(r.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));d.displayName=r.aV.displayName;let m=s.forwardRef(({className:e,children:a,...t},s)=>(0,i.jsxs)(c,{children:[i.jsx(d,{}),(0,i.jsxs)(r.VY,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[a,(0,i.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(l.Z,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=r.VY.displayName;let x=({className:e,...a})=>i.jsx("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});x.displayName="DialogHeader";let p=s.forwardRef(({className:e,...a},t)=>i.jsx(r.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));p.displayName=r.Dx.displayName,s.forwardRef(({className:e,...a},t)=>i.jsx(r.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",e),...a})).displayName=r.dk.displayName},87673:(e,a,t)=>{t.d(a,{g:()=>l});var i=t(10326),s=t(17577),r=t(77863);let l=s.forwardRef(({className:e,...a},t)=>i.jsx("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));l.displayName="Textarea"},46260:(e,a,t)=>{t.d(a,{P0:()=>s,Pz:()=>r,RZ:()=>l,SI:()=>i});let i={MAX_RIDER_HOURLY_RATE:12.5,MAX_BOOKING_HOURS:2,MIN_RIDER_HOURLY_RATE:5,MIN_BOOKING_HOURS:1},s=e=>e>=i.MIN_RIDER_HOURLY_RATE&&e<=i.MAX_RIDER_HOURLY_RATE,r=e=>e>=i.MIN_BOOKING_HOURS&&e<=i.MAX_BOOKING_HOURS,l={INVALID_RIDER_RATE:`La tariffa oraria deve essere compresa tra €${i.MIN_RIDER_HOURLY_RATE} e €${i.MAX_RIDER_HOURLY_RATE}`,INVALID_BOOKING_HOURS:`Le ore di prenotazione devono essere comprese tra ${i.MIN_BOOKING_HOURS} e ${i.MAX_BOOKING_HOURS}`}},997:(e,a,t)=>{t.d(a,{Z:()=>i});let i=(0,t(76557).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},97697:(e,a,t)=>{t.d(a,{Z:()=>i});let i=(0,t(76557).Z)("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]])},7027:(e,a,t)=>{t.d(a,{Z:()=>i});let i=(0,t(76557).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])}};