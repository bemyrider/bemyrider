(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[905],{7825:function(e,t,r){Promise.resolve().then(r.bind(r,6885))},6885:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var s=r(7437),a=r(2265),n=r(9376),i=r(2869),o=r(6070),c=r(5974),l=r(2660),d=r(1047),u=r(2369),m=r(1723),f=r(1477),x=r(3774),h=r(2141),p=r(7992),g=r(6524);function y(){let e=(0,n.useRouter)(),{toast:t}=(0,p.pm)(),[r,y]=(0,a.useState)([]),[v,b]=(0,a.useState)(!0),[j,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{w()},[]);let w=async()=>{try{b(!0);let{data:{user:t},error:r}=await h.O.auth.getUser();if(r||!t){e.push("/auth/login");return}let s=await fetch("/api/bookings",{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("Errore nel caricamento delle prenotazioni");let a=await s.json();y(a.bookings||[])}catch(e){console.error("Error fetching bookings:",e),N(e.message||"Errore nel caricamento delle prenotazioni")}finally{b(!1)}},k=e=>{let t={in_attesa:{label:"In Attesa",variant:"secondary"},confermata:{label:"Confermata",variant:"default"},in_corso:{label:"In Corso",variant:"secondary"},completata:{label:"Completata",variant:"default"},annullata:{label:"Annullata",variant:"destructive"}}[e]||{label:e,variant:"secondary"};return(0,s.jsx)(c.C,{variant:t.variant,children:t.label})},T=e=>new Date(e).toLocaleDateString("it-IT",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return v?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Caricamento prenotazioni..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)(i.z,{variant:"ghost",onClick:()=>e.back(),className:"mb-4",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Torna alla Dashboard"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestisci Prenotazioni"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Visualizza e gestisci le tue prenotazioni rider"})]}),j&&(0,s.jsx)(o.Zb,{className:"mb-6 border-red-200 bg-red-50",children:(0,s.jsxs)(o.aY,{className:"p-4",children:[(0,s.jsx)("p",{className:"text-red-600",children:j}),(0,s.jsx)(i.z,{onClick:w,className:"mt-2",children:"Riprova"})]})}),0===r.length?(0,s.jsx)(o.Zb,{children:(0,s.jsxs)(o.aY,{className:"text-center py-12",children:[(0,s.jsx)(d.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessuna prenotazione"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Non hai ancora effettuato prenotazioni. Cerca un rider per iniziare."}),(0,s.jsx)(i.z,{onClick:()=>e.push("/dashboard/merchant"),children:"Torna alla Dashboard"})]})}):(0,s.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,s.jsxs)(o.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Z,{className:"h-5 w-5"}),e.riderName]}),(0,s.jsxs)(o.SZ,{children:["Prenotazione #",e.id.slice(-8)]})]}),k(e.status)]})}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsxs)("span",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Inizio:"})," ",T(e.startTime)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsxs)("span",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Durata:"})," ",e.duration,"h"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsxs)("span",{className:"text-sm",children:[(0,s.jsx)("strong",{children:"Totale:"})," ",(0,g.xG)(e.grossAmount)]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[e.description&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Descrizione:"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 ml-6",children:e.description})]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4",children:["in_attesa"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.z,{size:"sm",variant:"outline",children:"Modifica"}),(0,s.jsx)(i.z,{size:"sm",variant:"destructive",children:"Annulla"})]}),"confermata"===e.status&&(0,s.jsx)(i.z,{size:"sm",children:"Contatta Rider"})]})]})]})})]},e.id))})]})})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var s=r(7437);r(2265);var a=r(535),n=r(4508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var s=r(7437),a=r(2265),n=r(7053),i=r(535),o=r(4508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:l=!1,...d}=e,u=l?n.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(c({variant:a,size:i,className:r})),ref:t,...d})});l.displayName="Button"},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var s=r(7437),a=r(2265),n=r(4508);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});o.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});l.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},7992:function(e,t,r){"use strict";r.d(t,{Am:function(){return u},pm:function(){return m}});var s=r(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],l={toasts:[]};function d(e){l=o(l,e),c.forEach(e=>{e(l)})}function u(e){let t=(a=(a+1)%1e6).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=s.useState(l);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},6524:function(e,t,r){"use strict";function s(e){return new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)}r.d(t,{xG:function(){return s}})},2141:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});let s=(0,r(5214).createBrowserClient)("https://uolpvxgcobjefivqnscj.supabase.co","sb_publishable_XfZivZLXatSeakd_ccimng_ZiTnn0dN")},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var s=r(1994),a=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{color:o="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:u="",children:m,...f}=r;return(0,s.createElement)("svg",{ref:i,...a,width:c,height:c,stroke:o,strokeWidth:d?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(n(e)),u].join(" "),...f},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1477:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]])},3774:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[214,569,971,117,744],function(){return e(e.s=7825)}),_N_E=e.O()}]);