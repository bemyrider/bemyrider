(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[725],{9349:function(e,t,r){Promise.resolve().then(r.bind(r,9626))},9626:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(7437),c=r(2265),a=r(2141),n=r(1115);function l(){let[e,t]=(0,c.useState)([]),[r,l]=(0,c.useState)(null),[o,i]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{let e,r,s,c;console.log("\uD83D\uDE80 Testing direct Supabase API calls..."),console.log("Test 1: Direct profiles API call");try{e=await (0,n.A9)(),console.log("✅ Direct profiles successful:",e)}catch(e){r=e,console.error("❌ Direct profiles failed:",e)}console.log("Test 2: Direct esercenti API call");try{s=await (0,n.g0)(),console.log("✅ Direct esercenti successful:",s)}catch(e){c=e,console.error("❌ Direct esercenti failed:",e)}let{data:{user:o},error:i}=await a.O.auth.getUser();if(i||!o)console.error("❌ Auth check failed:",i),l("No authenticated user");else{let a,l;console.log("✅ User authenticated:",o.id),console.log("Test 4: Direct user profile API call");try{a=await (0,n.QG)(o.id),console.log("✅ Direct user profile successful:",a)}catch(e){l=e,console.error("❌ Direct user profile failed:",e)}t([{test:"Direct Profiles",data:e,error:r},{test:"Direct Esercenti",data:s,error:c},{test:"Auth",data:o,error:i},{test:"Direct User Profile",data:a,error:l}])}}catch(e){console.error("❌ Test failed:",e),l(e.message)}finally{i(!1)}})()},[]),o)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4",children:"Testing direct API calls..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"\uD83D\uDE80 Direct API Test"}),(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h2",{className:"text-green-800 font-semibold mb-2",children:"\uD83D\uDE80 Direct REST API Calls"}),(0,s.jsx)("p",{className:"text-green-700 text-sm",children:"This test completely bypasses the Supabase JS client and PostgREST issues by making direct HTTP calls to the Supabase REST API. This should work even when PostgREST schema cache is broken."})]}),r&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,s.jsx)("h2",{className:"text-red-800 font-semibold",children:"❌ Error:"}),(0,s.jsx)("p",{className:"text-red-700",children:r})]}),(0,s.jsx)("div",{className:"space-y-6",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:[e.error?"❌":"✅"," Test: ",e.test]}),e.error?(0,s.jsxs)("div",{className:"bg-red-50 p-4 rounded",children:[(0,s.jsxs)("p",{className:"text-red-700",children:["Error: ",e.error.message||e.error]}),e.error.code&&(0,s.jsxs)("p",{className:"text-red-600 text-sm",children:["Code: ",e.error.code]})]}):(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded",children:[(0,s.jsx)("p",{className:"text-green-700 mb-2",children:"✅ Success!"}),(0,s.jsx)("pre",{className:"text-xs text-gray-600 overflow-auto max-h-40",children:JSON.stringify(e.data,null,2)})]})]},t))}),(0,s.jsxs)("div",{className:"mt-8 text-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"\uD83D\uDD04 Reload Tests"}),(0,s.jsx)("a",{href:"/test-supabase",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 inline-block",children:"\uD83D\uDCCA Compare with RPC Tests"})]})]})})}},1115:function(e,t,r){"use strict";r.d(t,{A9:function(){return n},QG:function(){return a},g0:function(){return l}});var s=r(2141);async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2?arguments[2]:void 0;try{let{data:{session:c}}=await s.O.auth.getSession(),a={"Content-Type":"application/json",apikey:"sb_publishable_XfZivZLXatSeakd_ccimng_ZiTnn0dN"};(null==c?void 0:c.access_token)&&(a.Authorization="Bearer ".concat(c.access_token));let n={method:t,headers:a};r&&"GET"!==t&&(n.body=JSON.stringify(r));let l=await fetch("".concat("https://uolpvxgcobjefivqnscj.supabase.co","/rest/v1/").concat(e),n);if(!l.ok)throw Error("API call failed: ".concat(l.status," ").concat(l.statusText));return await l.json()}catch(e){throw console.error("Direct API call failed:",e),e}}async function a(e){try{let t=await c("profiles?id=eq.".concat(e));return t.length>0?t[0]:null}catch(e){return console.error("Failed to get profile:",e),null}}async function n(){try{return await c("profiles?limit=10")}catch(e){return console.error("Failed to get profiles:",e),[]}}async function l(){try{return await c("esercenti?limit=10")}catch(e){return console.error("Failed to get esercenti:",e),[]}}},2141:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});let s=(0,r(5214).createBrowserClient)("https://uolpvxgcobjefivqnscj.supabase.co","sb_publishable_XfZivZLXatSeakd_ccimng_ZiTnn0dN")}},function(e){e.O(0,[214,971,117,744],function(){return e(e.s=9349)}),_N_E=e.O()}]);