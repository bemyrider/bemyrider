(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{4375:function(e,s,r){Promise.resolve().then(r.bind(r,7084))},7084:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return c}});var t=r(7437),l=r(2265),a=r(2141);function c(){let[e,s]=(0,l.useState)([]),[r,c]=(0,l.useState)(null),[n,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async()=>{try{console.log("\uD83E\uDDEA Testing Supabase queries..."),console.log("Test 1: RPC profiles query");let{data:e,error:r}=await a.O.rpc("get_all_profiles");r?(console.error("❌ Profiles RPC query failed:",r),c("Profiles RPC: ".concat(r.message))):console.log("✅ Profiles RPC query successful:",e),console.log("Test 2: RPC esercenti table query");let{data:t,error:l}=await a.O.rpc("get_all_esercenti");l?(console.error("❌ Esercenti RPC query failed:",l),c("Esercenti RPC: ".concat(l.message))):console.log("✅ Esercenti RPC query successful:",t);let{data:{user:n},error:o}=await a.O.auth.getUser(),i=null,d=null;if(o||!n)console.error("❌ Auth check failed:",o),c("No authenticated user");else{console.log("✅ User authenticated:",n.id);let{data:e,error:s}=await a.O.rpc("get_profile_by_id",{profile_id:n.id});i=e&&e.length>0?e[0]:null,(d=s)?(console.error("❌ User profile RPC query failed:",d),c("User profile RPC: ".concat(d.message))):console.log("✅ User profile RPC query successful:",i)}s([{test:"Profiles RPC",data:e,error:r},{test:"Esercenti RPC",data:t,error:l},{test:"Auth",data:n,error:o},{test:"User Profile RPC",data:i,error:d}])}catch(e){console.error("❌ Test failed:",e),c(e.message)}finally{o(!1)}})()},[]),n)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4",children:"Testing Supabase connection..."})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"container mx-auto px-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"\uD83E\uDDEA Supabase Connection Test"}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h2",{className:"text-blue-800 font-semibold mb-2",children:"ℹ️ Test RPC Functions"}),(0,t.jsx)("p",{className:"text-blue-700 text-sm",children:"This test uses RPC functions to bypass PostgREST's schema cache issues (PGRST002 error). RPC functions work directly with the database and should succeed even when regular table queries fail."})]}),r&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h2",{className:"text-red-800 font-semibold",children:"❌ Error:"}),(0,t.jsx)("p",{className:"text-red-700",children:r})]}),(0,t.jsx)("div",{className:"space-y-6",children:e.map((e,s)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:[e.error?"❌":"✅"," Test: ",e.test]}),e.error?(0,t.jsxs)("div",{className:"bg-red-50 p-4 rounded",children:[(0,t.jsxs)("p",{className:"text-red-700",children:["Error: ",e.error.message]}),(0,t.jsxs)("p",{className:"text-red-600 text-sm",children:["Code: ",e.error.code]})]}):(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded",children:[(0,t.jsx)("p",{className:"text-green-700 mb-2",children:"✅ Success!"}),(0,t.jsx)("pre",{className:"text-xs text-gray-600 overflow-auto",children:JSON.stringify(e.data,null,2)})]})]},s))}),(0,t.jsx)("div",{className:"mt-8 text-center",children:(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"\uD83D\uDD04 Reload Tests"})})]})})}},2141:function(e,s,r){"use strict";r.d(s,{O:function(){return t}});let t=(0,r(5214).createBrowserClient)("https://uolpvxgcobjefivqnscj.supabase.co","sb_publishable_XfZivZLXatSeakd_ccimng_ZiTnn0dN")}},function(e){e.O(0,[214,971,117,744],function(){return e(e.s=4375)}),_N_E=e.O()}]);